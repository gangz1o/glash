# glash ç¤ºä¾‹é…ç½®æ–‡ä»¶
# åŸºäº Mihomo (Clash Meta) å†…æ ¸
# æ–‡æ¡£: https://wiki.metacubex.one/

# ==================== åŸºç¡€é…ç½® ====================
# HTTP ä»£ç†ç«¯å£
port: 7890
# SOCKS5 ä»£ç†ç«¯å£
socks-port: 7891
# æ··åˆä»£ç†ç«¯å£ (HTTP + SOCKS5)
mixed-port: 7892
# å…è®¸å±€åŸŸç½‘è¿æ¥
allow-lan: true
# ç»‘å®šåœ°å€
bind-address: '*'
# è¿è¡Œæ¨¡å¼: rule / global / direct
mode: rule
# æ—¥å¿—çº§åˆ«: silent / error / warning / info / debug
log-level: info
# IPv6 æ”¯æŒ
ipv6: false

# ==================== API æ§åˆ¶å™¨ ====================
# å¤–éƒ¨æ§åˆ¶å™¨ (Dashboard éœ€è¦æ­¤é…ç½®)
# æ³¨æ„: Docker ä¸­ä½¿ç”¨ 0.0.0.0 ä»¥å…è®¸å¤–éƒ¨è®¿é—®
external-controller: 0.0.0.0:9090
# API å¯†é’¥ (å»ºè®®è®¾ç½®)
secret: 'your-secret-here'
# å¤–éƒ¨ UI ç›®å½• (Docker ä¸­å·²å†…ç½®ï¼Œæ— éœ€é…ç½®)
# external-ui: /app/ui

# ==================== DNS é…ç½® ====================
dns:
  enable: true
  listen: 0.0.0.0:53
  ipv6: false
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - '*.localhost'
    - localhost.ptlogin2.qq.com
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

# ==================== ä»£ç†èŠ‚ç‚¹ ====================
proxies:
  # VMess ç¤ºä¾‹
  - name: 'ç¤ºä¾‹èŠ‚ç‚¹-VMess'
    type: vmess
    server: example.com
    port: 443
    uuid: your-uuid-here
    alterId: 0
    cipher: auto
    tls: true
    skip-cert-verify: false
    network: ws
    ws-opts:
      path: /path
      headers:
        Host: example.com

  # Shadowsocks ç¤ºä¾‹
  - name: 'ç¤ºä¾‹èŠ‚ç‚¹-SS'
    type: ss
    server: example.com
    port: 8388
    cipher: aes-256-gcm
    password: your-password-here

  # Trojan ç¤ºä¾‹
  - name: 'ç¤ºä¾‹èŠ‚ç‚¹-Trojan'
    type: trojan
    server: example.com
    port: 443
    password: your-password-here
    sni: example.com
    skip-cert-verify: false

# ==================== ä»£ç†ç»„ ====================
proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT
      - ç¤ºä¾‹èŠ‚ç‚¹-VMess
      - ç¤ºä¾‹èŠ‚ç‚¹-SS
      - ç¤ºä¾‹èŠ‚ç‚¹-Trojan

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
      - ç¤ºä¾‹èŠ‚ç‚¹-VMess
      - ç¤ºä¾‹èŠ‚ç‚¹-SS
      - ç¤ºä¾‹èŠ‚ç‚¹-Trojan

  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  - name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ¯ å…¨çƒç›´è¿
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©

# ==================== åˆ†æµè§„åˆ™ ====================
rules:
  # ç›´è¿è§„åˆ™
  - DOMAIN-SUFFIX,cn,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-KEYWORD,baidu,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-KEYWORD,alibaba,ğŸ¯ å…¨çƒç›´è¿
  - DOMAIN-KEYWORD,tencent,ğŸ¯ å…¨çƒç›´è¿

  # å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-KEYWORD,adservice,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - DOMAIN-SUFFIX,googlesyndication.com,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª

  # ä»£ç†è§„åˆ™
  - DOMAIN-SUFFIX,google.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,youtube.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,github.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,twitter.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,telegram.org,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  # GeoIP è§„åˆ™
  - GEOIP,LAN,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿

  # å…œåº•è§„åˆ™
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
